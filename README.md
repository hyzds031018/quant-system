# æ™ºèƒ½é‡åŒ–æŠ•ç ”å¹³å° (Intelligent Quant Research Platform)

## 1. ç³»ç»Ÿæ¦‚è¿°
æœ¬ç³»ç»Ÿæ˜¯ä¸€ä¸ªé›†æˆäº†**å®žæ—¶è¡Œæƒ…ã€é‡åŒ–ç­–ç•¥å›žæµ‹ã€AIä»·æ ¼é¢„æµ‹ã€å¸‚åœºæƒ…ç»ªåˆ†æž**äºŽä¸€ä½“çš„ç»¼åˆæ€§æ™ºèƒ½æŠ•ç ”å¹³å°ã€‚æ—¨åœ¨ä¸ºæŠ•èµ„è€…æä¾›åŸºäºŽæ•°æ®é©±åŠ¨çš„å†³ç­–æ”¯æŒï¼Œé€šè¿‡æ·±åº¦å­¦ä¹ æ¨¡åž‹å’Œç»å…¸é‡åŒ–ç†è®ºï¼Œå…¨æ–¹ä½åˆ†æžå¸‚åœºåŠ¨æ€ã€‚

---

## 2. æ ¸å¿ƒæ¨¡å—ä¸ŽåŽŸç† (Core Principles)

æœ¬ç³»ç»Ÿä¸ä»…å±•ç¤ºæ•°æ®ï¼Œæ›´æ³¨é‡å¯¹æ•°æ®çš„æ·±åº¦æŒ–æŽ˜ä¸Žè§£é‡Šã€‚ä»¥ä¸‹æ˜¯ä¸‰å¤§æ ¸å¿ƒåˆ†æžæ¨¡å—çš„å®žçŽ°åŽŸç†ï¼š

### 2.1 é‡åŒ–å›žæµ‹ç³»ç»Ÿ (Quantitative Backtesting)
å¹³å°å†…ç½®äº†å¤šç§ç»å…¸é‡åŒ–äº¤æ˜“ç­–ç•¥ï¼Œæ”¯æŒç”¨æˆ·è‡ªå®šä¹‰å‚æ•°è¿›è¡ŒåŽ†å²å›žæµ‹ï¼Œä»¥éªŒè¯ç­–ç•¥çš„æœ‰æ•ˆæ€§ã€‚

*   **å‡çº¿äº¤å‰ç­–ç•¥ (Moving Average Crossover)**
    *   **åŽŸç†**ï¼šåˆ©ç”¨é•¿çŸ­å‘¨æœŸçš„ç§»åŠ¨å¹³å‡çº¿ï¼ˆMAï¼‰æ¥æ•æ‰è¶‹åŠ¿ã€‚
    *   **äº¤æ˜“ä¿¡å·**ï¼š
        *   **é‡‘å‰ (Golden Cross)**ï¼šå½“çŸ­æœŸå‡çº¿ï¼ˆå¦‚MA20ï¼‰ç”±ä¸‹å‘ä¸Šç©¿è¿‡é•¿æœŸå‡çº¿ï¼ˆå¦‚MA50ï¼‰æ—¶ï¼Œè§†ä¸ºä¹°å…¥ä¿¡å·ã€‚æ„å‘³ç€çŸ­æœŸè¶‹åŠ¿èµ°å¼ºã€‚
        *   **æ­»å‰ (Death Cross)**ï¼šå½“çŸ­æœŸå‡çº¿ç”±ä¸Šå‘ä¸‹ç©¿è¿‡é•¿æœŸå‡çº¿æ—¶ï¼Œè§†ä¸ºå–å…¥ä¿¡å·ã€‚æ„å‘³ç€çŸ­æœŸè¶‹åŠ¿èµ°å¼±ã€‚
    *   **åº”ç”¨**ï¼šé€‚ç”¨äºŽè¶‹åŠ¿æ˜Žæ˜¾çš„å¸‚åœºï¼Œéœ‡è¡å¸‚ä¸­å¯èƒ½å‡ºçŽ°é¢‘ç¹çš„è™šå‡ä¿¡å·ã€‚

*   **æŠ•èµ„ç»„åˆä¼˜åŒ– (Portfolio Optimization)**
    *   **åŽŸç†**ï¼šåŸºäºŽ**çŽ°ä»£æŠ•èµ„ç»„åˆç†è®º (Modern Portfolio Theory, MPT)**ï¼Œå³é©¬ç§‘ç»´èŒ¨å‡å€¼-æ–¹å·®æ¨¡åž‹ (Markowitz Mean-Variance Model)ã€‚
    *   **æ ¸å¿ƒç›®æ ‡**ï¼šåœ¨ç»™å®šçš„é£Žé™©æ°´å¹³ä¸‹æœ€å¤§åŒ–é¢„æœŸæ”¶ç›Šï¼Œæˆ–åœ¨ç»™å®šçš„æ”¶ç›Šç›®æ ‡ä¸‹æœ€å°åŒ–é£Žé™©ã€‚
    *   **ç®—æ³•å®žçŽ°**ï¼š
        1.  è®¡ç®—å¤šåªè‚¡ç¥¨çš„åŽ†å²æ”¶ç›ŠçŽ‡åæ–¹å·®çŸ©é˜µï¼ˆè¡¡é‡èµ„äº§é—´çš„ç›¸å…³æ€§ï¼‰ã€‚
        2.  é€šè¿‡æ•°å€¼ä¼˜åŒ–æ–¹æ³•ï¼ˆå¦‚SLSQPï¼‰ï¼Œæ±‚è§£ä½¿å¾—**å¤æ™®æ¯”çŽ‡ (Sharpe Ratio)** æœ€å¤§çš„æƒé‡ç»„åˆã€‚
    *   **æ„ä¹‰**ï¼šé€šè¿‡åˆ†æ•£æŠ•èµ„ç›¸å…³æ€§ä½Žçš„èµ„äº§ï¼Œé™ä½Žéžç³»ç»Ÿæ€§é£Žé™©ã€‚

*   **æ³¢åŠ¨çŽ‡ç›®æ ‡ç­–ç•¥ (Volatility Targeting)**
    *   **åŽŸç†**ï¼šæ ¹æ®å¸‚åœºæ³¢åŠ¨çŽ‡åŠ¨æ€è°ƒæ•´ä»“ä½ï¼Œä»¥ä¿æŒç»„åˆçš„é£Žé™©æ°´å¹³æ’å®šã€‚
    *   **å®žçŽ°**ï¼š
        1.  ä½¿ç”¨**æŒ‡æ•°åŠ æƒç§»åŠ¨å¹³å‡ (EWMA)** é¢„æµ‹ä¸‹ä¸€æ—¥çš„æ³¢åŠ¨çŽ‡ã€‚
        2.  è®¡ç®—ç›®æ ‡ä»“ä½ = ç›®æ ‡æ³¢åŠ¨çŽ‡ / é¢„æµ‹æ³¢åŠ¨çŽ‡ã€‚
        3.  å½“æ³¢åŠ¨çŽ‡ä¸Šå‡æ—¶ï¼Œé™ä½Žä»“ä½ï¼ˆåŽ»æ æ†ï¼‰ï¼›æ³¢åŠ¨çŽ‡ä¸‹é™æ—¶ï¼Œå¢žåŠ ä»“ä½ï¼ˆåŠ æ æ†ï¼‰ã€‚

### 2.2 å¸‚åœºæƒ…ç»ªåˆ†æž (Sentiment Analysis)
åˆ©ç”¨è‡ªç„¶è¯­è¨€å¤„ç† (NLP) æŠ€æœ¯ï¼Œä»Žæµ·é‡è´¢ç»æ–°é—»ä¸­æå–å¸‚åœºæƒ…ç»ªï¼Œä½œä¸ºé‡åŒ–æ•°æ®çš„è¡¥å……ã€‚

*   **æ•°æ®æº**ï¼šå®žæ—¶æŽ¥å…¥ **Finnhub** å…¨çƒè´¢ç»æ–°é—»æµã€‚
*   **åˆ†æžæ–¹æ³•**ï¼š**è¯å…¸åŒ¹é…æ³• (Lexicon-based Approach)**ã€‚
*   **è®¡ç®—é€»è¾‘**ï¼š
    1.  **æž„å»ºæƒ…æ„Ÿè¯å…¸**ï¼šåŒ…å«é‡‘èžé¢†åŸŸçš„æ­£å‘è¯æ±‡ï¼ˆå¦‚ surge, gain, profit, bullï¼‰å’Œè´Ÿå‘è¯æ±‡ï¼ˆå¦‚ drop, loss, miss, bearï¼‰ã€‚
    2.  **æ–‡æœ¬æ‰«æ**ï¼šå¯¹æ¯æ¡æ–°é—»çš„æ ‡é¢˜å’Œæ‘˜è¦è¿›è¡Œåˆ†è¯å’ŒåŒ¹é…ã€‚
    3.  **æƒ…ç»ªæ‰“åˆ†**ï¼šæ­£å‘è¯+1åˆ†ï¼Œè´Ÿå‘è¯-1åˆ†ï¼Œæ ¹æ®å¾—åˆ†å½’ä¸€åŒ–åˆ° [-1, 1] åŒºé—´ã€‚
    4.  **èšåˆåˆ†æž**ï¼šè®¡ç®—ç‰¹å®šæ—¶é—´çª—å£å†…çš„å¹³å‡æƒ…ç»ªå¾—åˆ†å’Œæ–°é—»çƒ­åº¦ï¼ˆVolumeï¼‰ï¼Œç”Ÿæˆâ€œçœ‹å¤š (Bullish)â€ã€â€œçœ‹ç©º (Bearish)â€æˆ–â€œä¸­æ€§ (Neutral)â€çš„è¯„çº§ã€‚

### 2.3 é£Žé™©è¯„ä¼°ä½“ç³» (Risk Assessment)
å¤šç»´åº¦é‡åŒ–æŒ‡æ ‡ï¼Œå¸®åŠ©æŠ•èµ„è€…è¯†åˆ«æ½œåœ¨é£Žé™©ã€‚

*   **å¹´åŒ–æ³¢åŠ¨çŽ‡ (Annualized Volatility)**ï¼šæ”¶ç›ŠçŽ‡æ ‡å‡†å·®çš„å¹´åŒ–å€¼ï¼Œè¡¡é‡èµ„äº§ä»·æ ¼å˜åŠ¨çš„å‰§çƒˆç¨‹åº¦ã€‚å€¼è¶Šé«˜ï¼Œé£Žé™©è¶Šå¤§ã€‚
*   **å¤æ™®æ¯”çŽ‡ (Sharpe Ratio)**ï¼š`(ç»„åˆæ”¶ç›ŠçŽ‡ - æ— é£Žé™©åˆ©çŽ‡) / æ³¢åŠ¨çŽ‡`ã€‚è¡¡é‡æ¯æ‰¿æ‹…ä¸€å•ä½é£Žé™©æ‰€èŽ·å¾—çš„è¶…é¢å›žæŠ¥ã€‚å¤§äºŽ1é€šå¸¸è¢«è®¤ä¸ºæ˜¯ä¼˜ç§€çš„ã€‚
*   **æœ€å¤§å›žæ’¤ (Max Drawdown)**ï¼šåœ¨é€‰å®šå‘¨æœŸå†…ï¼Œèµ„äº§ä»·æ ¼ä»Žæœ€é«˜ç‚¹è·Œè‡³æœ€ä½Žç‚¹çš„æœ€å¤§è·Œå¹…ã€‚è¡¡é‡æžç«¯çš„ä¸‹è¡Œé£Žé™©ã€‚
*   **Beta ç³»æ•°**ï¼šè¡¡é‡ä¸ªè‚¡ç›¸å¯¹äºŽå¤§ç›˜ï¼ˆå¦‚S&P 500ï¼‰çš„æ•æ„Ÿåº¦ã€‚
    *   Beta > 1: æ³¢åŠ¨æ¯”å¤§ç›˜å¤§ï¼ˆé«˜é£Žé™©é«˜æ”¶ç›Šï¼‰ã€‚
    *   Beta < 1: æ³¢åŠ¨æ¯”å¤§ç›˜å°ï¼ˆé˜²å¾¡æ€§ï¼‰ã€‚

---

## 3. åŠŸèƒ½ç‰¹æ€§ (Features)

### ðŸ“Š å¸‚åœºä¸Žæ•°æ®
- **å®žæ—¶çœ‹æ¿**ï¼šå±•ç¤ºå¤§ç›˜æŒ‡æ•°ã€æ¶¨è·Œå¹…æ¦œå•ã€å¸‚åœºçƒ­ç‚¹ã€‚
- **äº¤äº’å¼Kçº¿**ï¼šé›†æˆ EChartsï¼Œæ”¯æŒç¼©æ”¾ã€å¹³ç§»ï¼Œå åŠ  AI é¢„æµ‹æ›²çº¿å’ŒæŠ€æœ¯æŒ‡æ ‡ã€‚
- **å¤šç»´åº¦æ•°æ®**ï¼šåŒ…å« RSI, MACD, ATR, Stochastic ç­‰ä¸»æµæŠ€æœ¯æŒ‡æ ‡ã€‚

### ðŸ¤– AI å¢žå¼º
- **ä»·æ ¼é¢„æµ‹**ï¼šåŸºäºŽ LSTM/Transformer æ·±åº¦å­¦ä¹ æ¨¡åž‹ï¼Œé¢„æµ‹æœªæ¥ 7 å¤©è‚¡ä»·è¶‹åŠ¿ã€‚
- **ç½®ä¿¡åŒºé—´**ï¼šæä¾›é¢„æµ‹ä»·æ ¼çš„ 95% ç½®ä¿¡åŒºé—´ï¼Œé‡åŒ–é¢„æµ‹çš„ä¸ç¡®å®šæ€§ã€‚

### ðŸ“° èµ„è®¯æµ
- **å®žæ—¶æ–°é—»**ï¼šèšåˆä¸ªè‚¡æ–°é—»ä¸Žå®è§‚å¸‚åœºæ–°é—»ã€‚
- **æ™ºèƒ½æ ‡ç­¾**ï¼šè‡ªåŠ¨ä¸ºæ¯æ¡æ–°é—»æ‰“ä¸Šæƒ…æ„Ÿæ ‡ç­¾ï¼ˆBullish/Bearishï¼‰ã€‚

---

## 4. æŠ€æœ¯æž¶æž„
- **åŽç«¯**ï¼šPython Flask (æä¾› RESTful API)
- **æ•°æ®**ï¼šTiingo API (è¡Œæƒ…), Finnhub API (æ–°é—»), Pandas (æ•°æ®æ¸…æ´—)
- **å‰ç«¯**ï¼šHTML5, CSS3 (Grid Layout), JavaScript (ES6+)
- **å¯è§†åŒ–**ï¼šApache ECharts
- **æ¨¡åž‹**ï¼šPyTorch / TensorFlow (ç¦»çº¿è®­ç»ƒ), Scipy (ç»„åˆä¼˜åŒ–)

## 5. å¿«é€Ÿå¼€å§‹
1. **å®‰è£…ä¾èµ–**ï¼š
   ```bash
   pip install -r requirements.txt
   ```
2. **é…ç½® API Key** (åœ¨çŽ¯å¢ƒå˜é‡ä¸­è®¾ç½® `TIINGO_TOKEN` å’Œ `FINNHUB_TOKEN`)ã€‚
3. **å¯åŠ¨æœåŠ¡**ï¼š
   ```bash
   python app.py
   ```
4. **è®¿é—®**ï¼šæ‰“å¼€æµè§ˆå™¨è®¿é—® `http://127.0.0.1:5000`ã€‚

---

## 6. Deployment (Render free tier)

Recommended free deployment target: Render Web Service.

1. Push this repo to GitHub.
2. Create a new Web Service on Render and connect the repo.
3. Build Command: `pip install -r requirements.txt`
4. Start Command: `gunicorn app:app`
5. Set environment variables below.

Note: Render free instances sleep after inactivity and may cold-start on the first request.

## 7. Environment variables

Required for login:

- `APP_SECRET`: session secret (random long string)
- `APP_USER`: login username (default `admin`)
- `APP_PASSWORD` or `APP_PASSWORD_HASH`: login password (hash recommended)
- `ENABLE_LOGIN`: set `1` (default) to enable login, `0` to disable
- `SESSION_COOKIE_SECURE`: set `1` on HTTPS deployments

Data / API keys:

- `FINNHUB_TOKEN`: news API key
- `TIINGO_TOKEN`: market data API key (if you use Tiingo)

Optional:

- `AUTH_FILE`: file path for storing password hash (default `.auth.json`)

## 8. Admin page

After login, open `/admin` to change password online.

Behavior:

- If `APP_PASSWORD_HASH` is set, online change is disabled (update the env var instead).
- If `APP_PASSWORD` is set, you can change it online; the new hash is saved into `AUTH_FILE`.
- The file is local to the server. On free-tier deployments, it may be reset after redeploy.

---

## 9. Deployment (Cloud Run)

Cloud Run can build directly from source and deploy with one command.

### 9.1 Prereqs

1. Install Google Cloud CLI and sign in.
2. Set your project and enable APIs.

Example:

```
gcloud auth login
gcloud config set project YOUR_PROJECT_ID
gcloud services enable run.googleapis.com cloudbuild.googleapis.com artifactregistry.googleapis.com
```

### 9.2 Deploy from source

From the repo root:

```
gcloud run deploy quant-system \
  --source . \
  --region us-central1 \
  --allow-unauthenticated \
  --set-env-vars APP_SECRET=YOUR_SECRET,APP_USER=admin,APP_PASSWORD=YOUR_PASS,FINNHUB_TOKEN=YOUR_FINNHUB,SESSION_COOKIE_SECURE=1
```

Notes:

- `--allow-unauthenticated` makes the service public; the app still requires login.
- `--set-env-vars` replaces any previous env vars, so include all values every deploy.

### 9.3 Free tier

Cloud Run includes a free tier of requests, CPU, and memory per month. See Google Cloud Free Program limits for Cloud Run.

